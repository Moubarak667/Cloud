{"version":3,"file":"uplot-react.js","mappings":"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","sources":["webpack://UplotReact/webpack/universalModuleDefinition","webpack://UplotReact/./common/index.ts","webpack://UplotReact/external umd {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}","webpack://UplotReact/external umd {\"amd\":\"uplot\",\"commonjs\":\"uplot\",\"commonjs2\":\"uplot\",\"root\":\"uPlot\"}","webpack://UplotReact/webpack/bootstrap","webpack://UplotReact/webpack/runtime/compat get default export","webpack://UplotReact/webpack/runtime/define property getters","webpack://UplotReact/webpack/runtime/hasOwnProperty shorthand","webpack://UplotReact/webpack/runtime/make namespace object","webpack://UplotReact/./react/uplot-react.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"uplot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"uplot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UplotReact\"] = factory(require(\"react\"), require(\"uplot\"));\n\telse\n\t\troot[\"UplotReact\"] = factory(root[\"React\"], root[\"uPlot\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_uplot__) => {\nreturn ","import uPlot from 'uplot';\n\ntype OptionsUpdateState = 'keep' | 'update' | 'create';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\nif (!Object.is) {\n    // eslint-disable-next-line\n    Object.defineProperty(Object, \"is\", {value: (x: any, y: any) =>\n        (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y)\n    });\n}\n\nexport const optionsUpdateState = (_lhs: uPlot.Options, _rhs: uPlot.Options): OptionsUpdateState => {\n    const {width: lhsWidth, height: lhsHeight, ...lhs} = _lhs;\n    const {width: rhsWidth, height: rhsHeight, ...rhs} = _rhs;\n\n    let state: OptionsUpdateState = 'keep';\n    if (lhsHeight !== rhsHeight || lhsWidth !== rhsWidth) {\n        state = 'update';\n    }\n    if (Object.keys(lhs).length !== Object.keys(rhs).length) {\n        return 'create';\n    }\n    for (const k of Object.keys(lhs)) {\n        if (!Object.is(lhs[k], rhs[k])) {\n            state = 'create';\n            break;\n        }\n    }\n    return state;\n}\n\nexport const dataMatch = (lhs: uPlot.AlignedData, rhs: uPlot.AlignedData): boolean => {\n    if (lhs.length !== rhs.length) {\n        return false;\n    }\n    return lhs.every((lhsOneSeries, seriesIdx) => {\n        const rhsOneSeries = rhs[seriesIdx];\n        if (lhsOneSeries.length !== rhsOneSeries.length) {\n            return false;\n        }\n        return lhsOneSeries.every((value: number, valueIdx: number) => value === rhsOneSeries[valueIdx]);\n    });\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","module.exports = __WEBPACK_EXTERNAL_MODULE_uplot__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useCallback, useEffect, useRef } from 'react';\n\nimport uPlot from 'uplot';\n\nimport { optionsUpdateState, dataMatch } from 'uplot-wrappers-common';\n\nexport default function UplotReact({\n    options,\n    data,\n    target,\n    onDelete,\n    onCreate,\n    resetScales = true,\n    className\n}: {\n    options: uPlot.Options;\n    data: uPlot.AlignedData;\n    // eslint-disable-next-line\n    target?: HTMLElement | ((self: uPlot, init: Function) => void);\n    onDelete?: (chart: uPlot) => void;\n    onCreate?: (chart: uPlot) => void;\n    resetScales?: boolean;\n    className?: string;\n}): JSX.Element | null {\n    const chartRef = useRef<uPlot | null>(null);\n    const targetRef = useRef<HTMLDivElement>(null);\n    const propOptionsRef = useRef(options);\n    const propTargetRef = useRef(target);\n    const propDataRef = useRef(data);\n    const onCreateRef = useRef(onCreate);\n    const onDeleteRef = useRef(onDelete);\n\n    useEffect(() => {\n        onCreateRef.current = onCreate;\n        onDeleteRef.current = onDelete;\n    });\n\n    const destroy = useCallback((chart: uPlot | null) => {\n        if (chart) {\n            onDeleteRef.current?.(chart);\n            chart.destroy();\n            chartRef.current = null;\n        }\n    }, []);\n    const create = useCallback(() => {\n        const newChart = new uPlot(\n            propOptionsRef.current,\n            propDataRef.current,\n            propTargetRef.current || (targetRef.current as HTMLDivElement)\n        );\n        chartRef.current = newChart;\n        onCreateRef.current?.(newChart);\n    }, []);\n\n    useEffect(() => {\n        create();\n        return () => {\n            destroy(chartRef.current);\n        };\n    }, [create, destroy]);\n\n    useEffect(() => {\n        if (propOptionsRef.current !== options) {\n            const optionsState = optionsUpdateState(propOptionsRef.current, options);\n            propOptionsRef.current = options;\n            if (!chartRef.current || optionsState === 'create') {\n                destroy(chartRef.current);\n                create();\n            } else if (optionsState === 'update') {\n                chartRef.current.setSize({\n                    width: options.width,\n                    height: options.height,\n                });\n            }\n        }\n    }, [options, create, destroy]);\n\n    useEffect(() => {\n        if (propDataRef.current !== data) {\n            if (!chartRef.current) {\n                propDataRef.current = data;\n                create();\n            } else if (!dataMatch(propDataRef.current, data)) {\n                if (resetScales) {\n                    chartRef.current.setData(data, true);\n                } else {\n                    chartRef.current.setData(data, false);\n                    chartRef.current.redraw();\n                }\n            }\n            propDataRef.current = data;\n        }\n    }, [data, resetScales, create]);\n\n    useEffect(() => {\n        if (propTargetRef.current !== target) {\n            propTargetRef.current = target;\n            create();\n        }\n\n        return () => destroy(chartRef.current);\n    }, [target, create, destroy]);\n\n    return target ? null : <div ref={targetRef} className={className}></div>;\n}\n"],"names":[],"sourceRoot":""}