{"ast":null,"code":"import _toConsumableArray from\"/home/nabster/redis-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/nabster/redis-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import'./App.css';import{URL}from'./conf';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newV=_useState4[0],setnewV=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newK=_useState6[0],setnewK=_useState6[1];useEffect(function(){fetch(URL+'/items').then(function(r){return r.json();}).then(setState);},[]);var create=function create(id,val){fetch(URL+'/item',{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({id:id,val:val})}).then(function(_){return setState([].concat(_toConsumableArray(state),[id]));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[state.map(function(key){return/*#__PURE__*/_jsx(Key,{val:key},key);}),/*#__PURE__*/_jsxs(\"div\",{className:\"new\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" New key\"}),\"key:\",/*#__PURE__*/_jsx(\"input\",{value:newK,onChange:function onChange(event){return setnewK(event.target.value);}}),\"Value:\",/*#__PURE__*/_jsx(\"input\",{value:newV,onChange:function onChange(event){return setnewV(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return create(newK,newV);},children:\"add\"})]})]});}export default App;var Key=function Key(_ref){var val=_ref.val;var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),state=_useState8[0],setState=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),updated=_useState10[0],setUpdated=_useState10[1];useEffect(function(){fetch(URL+'/item?id='+val).then(function(r){return r.text();}).then(setState);},[val]);var update=function update(id,val){setUpdated('updating');fetch(URL+'/item',{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({id:id,val:val})}).then(function(){return setUpdated('');});};return/*#__PURE__*/_jsxs(\"div\",{className:\"key\",children:[val,\":\",' ',/*#__PURE__*/_jsx(\"input\",{value:state,onChange:function onChange(event){setUpdated('updated');setState(event.target.value);}}),updated&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return update(val,state);},children:\"update\"})]});};","map":{"version":3,"names":["useEffect","useState","URL","App","state","setState","newV","setnewV","newK","setnewK","fetch","then","r","json","create","id","val","method","headers","Accept","body","JSON","stringify","_","map","key","event","target","value","Key","updated","setUpdated","text","update"],"sources":["/home/nabster/redis-react/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport './App.css'\nimport { URL } from './conf'\n\nfunction App() {\n  const [state, setState] = useState([])\n  const [newV, setnewV] = useState('')\n  const [newK, setnewK] = useState('')\n  useEffect(() => {\n    fetch(URL + '/items')\n      .then((r) => r.json())\n      .then(setState)\n  }, [])\n\n  const create = (id, val) => {\n    fetch(URL + '/item', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ id, val }),\n    }).then((_) => setState([...state, id]))\n  }\n\n  return (\n    <div className=\"App\">\n      {state.map((key) => (\n        <Key val={key} key={key} />\n      ))}\n      <div className=\"new\">\n        <h1> New key</h1>\n        key:\n        <input value={newK} onChange={(event) => setnewK(event.target.value)} />\n        Value:\n        <input value={newV} onChange={(event) => setnewV(event.target.value)} />\n        <button onClick={() => create(newK, newV)}>add</button>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n\nconst Key = ({ val }) => {\n  const [state, setState] = useState('')\n  const [updated, setUpdated] = useState('')\n  useEffect(() => {\n    fetch(URL + '/item?id=' + val)\n      .then((r) => r.text())\n      .then(setState)\n  }, [val])\n\n  const update = (id, val) => {\n    setUpdated('updating')\n    fetch(URL + '/item', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ id, val }),\n    }).then(() => setUpdated(''))\n  }\n\n  return (\n    <div className=\"key\">\n      {val}:{' '}\n      <input\n        value={state}\n        onChange={(event) => {\n          setUpdated('updated')\n          setState(event.target.value)\n        }}\n      />\n      {updated && <button onClick={() => update(val, state)}>update</button>}\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}