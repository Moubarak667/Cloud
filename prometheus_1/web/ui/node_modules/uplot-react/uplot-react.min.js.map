{"version":3,"file":"uplot-react.min.js","mappings":"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","sources":["webpack://UplotReact/webpack/universalModuleDefinition","webpack://UplotReact/external umd {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}","webpack://UplotReact/external umd {\"amd\":\"uplot\",\"commonjs\":\"uplot\",\"commonjs2\":\"uplot\",\"root\":\"uPlot\"}","webpack://UplotReact/webpack/bootstrap","webpack://UplotReact/webpack/runtime/compat get default export","webpack://UplotReact/webpack/runtime/define property getters","webpack://UplotReact/webpack/runtime/hasOwnProperty shorthand","webpack://UplotReact/./react/uplot-react.tsx","webpack://UplotReact/./common/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"uplot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"uplot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UplotReact\"] = factory(require(\"react\"), require(\"uplot\"));\n\telse\n\t\troot[\"UplotReact\"] = factory(root[\"React\"], root[\"uPlot\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__329__, __WEBPACK_EXTERNAL_MODULE__207__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__329__;","module.exports = __WEBPACK_EXTERNAL_MODULE__207__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import React, { useCallback, useEffect, useRef } from 'react';\n\nimport uPlot from 'uplot';\n\nimport { optionsUpdateState, dataMatch } from 'uplot-wrappers-common';\n\nexport default function UplotReact({\n    options,\n    data,\n    target,\n    onDelete,\n    onCreate,\n    resetScales = true,\n    className\n}: {\n    options: uPlot.Options;\n    data: uPlot.AlignedData;\n    // eslint-disable-next-line\n    target?: HTMLElement | ((self: uPlot, init: Function) => void);\n    onDelete?: (chart: uPlot) => void;\n    onCreate?: (chart: uPlot) => void;\n    resetScales?: boolean;\n    className?: string;\n}): JSX.Element | null {\n    const chartRef = useRef<uPlot | null>(null);\n    const targetRef = useRef<HTMLDivElement>(null);\n    const propOptionsRef = useRef(options);\n    const propTargetRef = useRef(target);\n    const propDataRef = useRef(data);\n    const onCreateRef = useRef(onCreate);\n    const onDeleteRef = useRef(onDelete);\n\n    useEffect(() => {\n        onCreateRef.current = onCreate;\n        onDeleteRef.current = onDelete;\n    });\n\n    const destroy = useCallback((chart: uPlot | null) => {\n        if (chart) {\n            onDeleteRef.current?.(chart);\n            chart.destroy();\n            chartRef.current = null;\n        }\n    }, []);\n    const create = useCallback(() => {\n        const newChart = new uPlot(\n            propOptionsRef.current,\n            propDataRef.current,\n            propTargetRef.current || (targetRef.current as HTMLDivElement)\n        );\n        chartRef.current = newChart;\n        onCreateRef.current?.(newChart);\n    }, []);\n\n    useEffect(() => {\n        create();\n        return () => {\n            destroy(chartRef.current);\n        };\n    }, [create, destroy]);\n\n    useEffect(() => {\n        if (propOptionsRef.current !== options) {\n            const optionsState = optionsUpdateState(propOptionsRef.current, options);\n            propOptionsRef.current = options;\n            if (!chartRef.current || optionsState === 'create') {\n                destroy(chartRef.current);\n                create();\n            } else if (optionsState === 'update') {\n                chartRef.current.setSize({\n                    width: options.width,\n                    height: options.height,\n                });\n            }\n        }\n    }, [options, create, destroy]);\n\n    useEffect(() => {\n        if (propDataRef.current !== data) {\n            if (!chartRef.current) {\n                propDataRef.current = data;\n                create();\n            } else if (!dataMatch(propDataRef.current, data)) {\n                if (resetScales) {\n                    chartRef.current.setData(data, true);\n                } else {\n                    chartRef.current.setData(data, false);\n                    chartRef.current.redraw();\n                }\n            }\n            propDataRef.current = data;\n        }\n    }, [data, resetScales, create]);\n\n    useEffect(() => {\n        if (propTargetRef.current !== target) {\n            propTargetRef.current = target;\n            create();\n        }\n\n        return () => destroy(chartRef.current);\n    }, [target, create, destroy]);\n\n    return target ? null : <div ref={targetRef} className={className}></div>;\n}\n","import uPlot from 'uplot';\n\ntype OptionsUpdateState = 'keep' | 'update' | 'create';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\nif (!Object.is) {\n    // eslint-disable-next-line\n    Object.defineProperty(Object, \"is\", {value: (x: any, y: any) =>\n        (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y)\n    });\n}\n\nexport const optionsUpdateState = (_lhs: uPlot.Options, _rhs: uPlot.Options): OptionsUpdateState => {\n    const {width: lhsWidth, height: lhsHeight, ...lhs} = _lhs;\n    const {width: rhsWidth, height: rhsHeight, ...rhs} = _rhs;\n\n    let state: OptionsUpdateState = 'keep';\n    if (lhsHeight !== rhsHeight || lhsWidth !== rhsWidth) {\n        state = 'update';\n    }\n    if (Object.keys(lhs).length !== Object.keys(rhs).length) {\n        return 'create';\n    }\n    for (const k of Object.keys(lhs)) {\n        if (!Object.is(lhs[k], rhs[k])) {\n            state = 'create';\n            break;\n        }\n    }\n    return state;\n}\n\nexport const dataMatch = (lhs: uPlot.AlignedData, rhs: uPlot.AlignedData): boolean => {\n    if (lhs.length !== rhs.length) {\n        return false;\n    }\n    return lhs.every((lhsOneSeries, seriesIdx) => {\n        const rhsOneSeries = rhs[seriesIdx];\n        if (lhsOneSeries.length !== rhsOneSeries.length) {\n            return false;\n        }\n        return lhsOneSeries.every((value: number, valueIdx: number) => value === rhsOneSeries[valueIdx]);\n    });\n}\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__329__","__WEBPACK_EXTERNAL_MODULE__207__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","UplotReact","options","data","target","onDelete","onCreate","resetScales","className","chartRef","useRef","targetRef","propOptionsRef","propTargetRef","propDataRef","onCreateRef","onDeleteRef","useEffect","current","destroy","useCallback","chart","create","newChart","optionsState","_lhs","_rhs","lhsWidth","width","lhsHeight","height","lhs","rhsWidth","rhsHeight","rhs","state","keys","length","k","is","optionsUpdateState","setSize","every","lhsOneSeries","seriesIdx","rhsOneSeries","value","valueIdx","setData","redraw","ref","x","y"],"sourceRoot":""}